(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),s=(a(96),a(12)),i=a(0),c=a.n(i),o=(a(97),a(13)),l=a(173),u=a(174),d=a(125),j=a(159),p=a(82),m=a(187),b=a(164),f=a(175),h=a(16),O=a.n(h),x=a(24),g=a(20),v=a.n(g),w=a(2),C={id:-1,username:"",email:"",displayName:""},y={authenticated:!1,user:C,signin:function(e,t){return Promise.resolve({success:!1,error:"",field:""})},signup:function(e){return Promise.resolve({success:!1,error:"",field:""})},signout:function(){},update:function(e){return Promise.resolve({success:!1,error:"",field:""})}},k=Object(i.createContext)(y);function N(e){var t=e.children,a=function(){var e=Object(i.useState)(C),t=Object(s.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(!1),c=Object(s.a)(r,2),o=c[0],l=c[1],u=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/login",{userIdentifier:t,password:a},{withCredentials:!0});case 2:return(r=e.sent).data.success&&(l(!0),n(r.data.user)),e.abrupt("return",{success:r.data.success,error:r.data.error||"",field:r.data.field||""});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,v.a.post("/register",t,{withCredentials:!0});case 3:return(a=e.sent).data.success&&(l(!0),n(a.data.user)),e.abrupt("return",{success:a.data.success,error:a.data.error||"",field:a.data.field||""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){v.a.get("/logout"),l(!1),n(C)},p=function(){var e=Object(x.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,v.a.put("/user",t,{withCredentials:!0});case 3:return(r=e.sent).data.success&&n({id:a.id,username:t.username,email:t.email,displayName:t.displayName}),e.abrupt("return",{success:r.data.success,error:r.data.error||"",field:r.data.field||""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){return n(C)}}),[]),{authenticated:o,user:a,signin:u,signup:d,signout:j,update:p}}();return Object(w.jsxs)(k.Provider,{value:a,children:[" ",t," "]})}var W=function(){return Object(i.useContext)(k)};var S=a(160),T=a(186),D=a(30),F=a(5),I=a(178),P=a(163),E=a(181),q=a(165),L=a(166),A=a(167),R=a(168),B=a(179);function M(e){return Object(w.jsx)(B.a,Object(D.a)({elevation:6,variant:"filled"},e))}var U=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(2,0,2)}}})),z=Object(F.a)({root:{"& .MuiInputBase-root.Mui-disabled":{color:"black"}}})(I.a);var V=function(){var e=W(),t=U(),a=Object(i.useState)(""),n=Object(s.a)(a,2),r=n[0],c=n[1],o=Object(i.useState)(!1),l=Object(s.a)(o,2),u=l[0],p=l[1],m=Object(i.useState)([]),f=Object(s.a)(m,2),h=f[0],g=f[1];return Object(i.useEffect)((function(){v.a.get("/posts").then((function(e){return g(e.data.posts)}))}),[]),Object(w.jsx)(P.a,{maxWidth:"sm",children:Object(w.jsxs)("div",{className:t.paper,children:[e.authenticated?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{autoComplete:"off",name:"newPost",variant:"outlined",fullWidth:!0,id:"newPost",label:"New post",autoFocus:!0,multiline:!0,minRows:3,value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)(b.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",className:t.submit,onClick:function(e){e.preventDefault(),Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/post",{content:r},{withCredentials:!0});case 2:!0===e.sent.data.success&&(p(!0),c(""),v.a.get("/posts").then((function(e){return g(e.data.posts)})));case 4:case"end":return e.stop()}}),e)})))()},children:"Post"}),Object(w.jsx)(E.a,{open:u,autoHideDuration:6e3,children:Object(w.jsx)(M,{severity:"info",onClose:function(){p(!1)},children:"New post created!"})})]}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(d.a,{children:Object(w.jsx)("strong",{children:"Latest posts"})}),Object(w.jsx)("br",{}),Object(w.jsx)(q.a,{container:!0,spacing:2,children:h.map((function(t){return Object(w.jsx)(q.a,{item:!0,xs:12,children:Object(w.jsx)(z,{autoComplete:"off",variant:"outlined",fullWidth:!0,label:"".concat(t.owner.displayName," <@").concat(t.owner.username,"> at ").concat(t.date),multiline:!0,minRows:3,value:t.content,disabled:!0,InputProps:{endAdornment:Object(w.jsxs)(L.a,{position:"end",children:[t.likes.length,t.likes.includes(e.user.id)?Object(w.jsx)(j.a,{color:"secondary",onClick:function(e){e.preventDefault(),v.a.post("/unlike",{post:t.id},{withCredentials:!0}).then((function(){return v.a.get("/posts").then((function(e){return g(e.data.posts)}))}))},children:Object(w.jsx)(A.a,{})}):Object(w.jsx)(j.a,{onClick:function(e){e.preventDefault(),v.a.post("/like",{post:t.id},{withCredentials:!0}).then((function(){return v.a.get("/posts").then((function(e){return g(e.data.posts)}))}))},children:Object(w.jsx)(R.a,{})})]})}})})}))})]})})},G=a(185),H=a(169),J=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(2,0,2)}}}));var Y=function(){var e=J(),t=Object(o.f)(),a=W(),n=Object(i.useState)(""),r=Object(s.a)(n,2),c=r[0],l=r[1],u=Object(i.useState)(!1),j=Object(s.a)(u,2),p=j[0],m=j[1],f=Object(i.useState)(""),h=Object(s.a)(f,2),g=h[0],v=h[1],C=Object(i.useState)(""),y=Object(s.a)(C,2),k=y[0],N=y[1],S=Object(i.useState)(!1),T=Object(s.a)(S,2),D=T[0],F=T[1],E=Object(i.useState)(""),q=Object(s.a)(E,2),L=q[0],A=q[1];return Object(i.useEffect)((function(){a.authenticated&&t.push("/")}),[a,t]),Object(w.jsx)(P.a,{maxWidth:"xs",children:Object(w.jsxs)("div",{className:e.paper,children:[Object(w.jsx)(G.a,{className:e.avatar,children:Object(w.jsx)(H.a,{})}),Object(w.jsx)(d.a,{component:"h1",variant:"h5",children:"Login"}),Object(w.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(w.jsx)(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userIdentifier",label:"Username or email",name:"userIdentifier",autoComplete:"on",autoFocus:!0,value:c,onChange:function(e){return l(e.target.value)},error:p,helperText:g}),Object(w.jsx)(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:k,onChange:function(e){return N(e.target.value)},error:D,helperText:L}),Object(w.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,size:"large",onClick:function(e){e.preventDefault(),m(!1),v(""),F(!1),A(""),Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.signin(c,k);case 2:t=e.sent,e.t0=t.field,e.next="userIdentifier"===e.t0?6:"password"===e.t0?9:12;break;case 6:return m(!0),v(t.error),e.abrupt("break",13);case 9:return F(!0),A(t.error),e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:case 14:case"end":return e.stop()}}),e)})))()},children:"Sign In"})]})]})})},K=a(38),Q=a(161),X=a(184),Z=a(183),$=a(162),_=a(170),ee=a(171),te=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},fieldFix:{marginTop:e.spacing(1)},submit:{margin:e.spacing(2,0,2)}}}));var ae=function(){var e=W(),t=Object(o.f)(),a=te(),n=c.a.useState({displayName:"",username:"",email:"",password:""}),r=Object(s.a)(n,2),l=r[0],u=r[1],p=c.a.useState({field:"",message:""}),m=Object(s.a)(p,2),f=m[0],h=m[1],g=c.a.useState(!1),v=Object(s.a)(g,2),C=v[0],y=v[1],k=function(e){return function(t){u(Object(D.a)(Object(D.a)({},l),{},Object(K.a)({},e,t.target.value)))}};return Object(i.useEffect)((function(){e.authenticated&&t.push("/")}),[e,t]),Object(w.jsx)(P.a,{maxWidth:"sm",children:Object(w.jsxs)("div",{className:a.paper,children:[Object(w.jsx)(G.a,{className:a.avatar,children:Object(w.jsx)(H.a,{})}),Object(w.jsx)(d.a,{component:"h1",variant:"h5",children:"Register"}),Object(w.jsxs)("form",{className:a.form,noValidate:!0,children:[Object(w.jsxs)(q.a,{container:!0,spacing:1,children:[Object(w.jsx)(q.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(I.a,{autoComplete:"name",name:"displayName",variant:"outlined",required:!0,fullWidth:!0,id:"displayName",label:"Name",autoFocus:!0,value:l.displayName,onChange:k("displayName"),error:"displayName"===f.field,helperText:"displayName"===f.field?f.message:""})}),Object(w.jsx)(q.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(I.a,{autoComplete:"username",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",InputProps:{startAdornment:Object(w.jsx)(L.a,{position:"start",children:"@"}),placeholder:"super.cool.username"},value:l.username,onChange:k("username"),error:"username"===f.field,helperText:"username"===f.field?f.message:""})}),Object(w.jsx)(q.a,{item:!0,xs:12,children:Object(w.jsx)(I.a,{className:a.fieldFix,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",value:l.email,onChange:k("email"),error:"email"===f.field,helperText:"email"===f.field?f.message:""})}),Object(w.jsx)(q.a,{item:!0,xs:12,children:Object(w.jsxs)(Q.a,{variant:"outlined",fullWidth:!0,children:[Object(w.jsx)(X.a,{htmlFor:"outlined-adornment-password",error:"password"===f.field,children:"Password"}),Object(w.jsx)(Z.a,{id:"outlined-adornment-password",type:C?"text":"password",value:l.password,onChange:k("password"),endAdornment:Object(w.jsx)(L.a,{position:"end",children:Object(w.jsx)(j.a,{"aria-label":"toggle password visibility",onClick:function(){y(!C)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:C?Object(w.jsx)(_.a,{}):Object(w.jsx)(ee.a,{})})}),labelWidth:70,error:"password"===f.field}),Object(w.jsx)($.a,{error:"password"===f.field,children:"password"===f.field?f.message:""})]})})]}),Object(w.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,size:"large",onClick:function(t){t.preventDefault(),h({field:"",message:""}),Object(x.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signup(l);case 2:a=t.sent,h({field:a.field,message:a.error});case 4:case"end":return t.stop()}}),t)})))()},children:"Register"}),Object(w.jsx)(d.a,{variant:"caption",children:"By registering you agree to the use of cookies"})]})]})})},ne=a(172);function re(e){return Object(w.jsx)(B.a,Object(D.a)({elevation:6,variant:"filled"},e))}var se=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(5),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(2,0,2)}}}));var ie=function(){var e=se(),t=W(),a=Object(o.f)(),n=Object(i.useState)({displayName:"",username:"",email:"",password:""}),r=Object(s.a)(n,2),c=r[0],l=r[1],u=Object(i.useState)({success:!1,field:"",error:""}),p=Object(s.a)(u,2),m=p[0],f=p[1],h=Object(i.useState)(!1),g=Object(s.a)(h,2),v=g[0],C=g[1],y=function(e){return function(t){l(Object(D.a)(Object(D.a)({},c),{},Object(K.a)({},e,t.target.value)))}};return Object(i.useEffect)((function(){t.authenticated||a.push("/login")}),[t,a]),Object(i.useEffect)((function(){l({username:t.user.username,email:t.user.email,displayName:t.user.displayName,password:""})}),[t]),Object(w.jsx)(P.a,{maxWidth:"xs",children:Object(w.jsxs)("div",{className:e.paper,children:[Object(w.jsx)(G.a,{className:e.avatar,children:Object(w.jsx)(ne.a,{})}),Object(w.jsx)(d.a,{component:"h1",variant:"h5",children:"Your account"}),Object(w.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(w.jsx)(I.a,{margin:"dense",autoComplete:"username",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",InputProps:{startAdornment:Object(w.jsx)(L.a,{position:"start",children:"@"}),placeholder:"super.cool.username"},value:c.username,onChange:y("username"),error:"username"===m.field,helperText:"username"===m.field?m.error:""}),Object(w.jsx)(I.a,{margin:"dense",variant:"outlined",autoComplete:"email",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",value:c.email,onChange:y("email"),error:"email"===m.field,helperText:"email"===m.field?m.error:""}),Object(w.jsx)(I.a,{margin:"dense",variant:"outlined",required:!0,fullWidth:!0,id:"displayName",label:"Name",name:"displayName",value:c.displayName,onChange:y("displayName")}),Object(w.jsxs)(Q.a,{variant:"outlined",fullWidth:!0,margin:"dense",children:[Object(w.jsx)(X.a,{htmlFor:"outlined-adornment-password",error:"password"===m.field,children:"New Password"}),Object(w.jsx)(Z.a,{id:"outlined-adornment-password",type:v?"text":"password",value:c.password,onChange:y("password"),endAdornment:Object(w.jsx)(L.a,{position:"end",children:Object(w.jsx)(j.a,{"aria-label":"toggle password visibility",onClick:function(){C(!v)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:v?Object(w.jsx)(_.a,{}):Object(w.jsx)(ee.a,{})})}),labelWidth:110,error:"password"===m.field}),Object(w.jsx)($.a,{error:"password"===m.field,children:"password"===m.field?m.error:"Leave empty to leave your password unchanged"})]}),Object(w.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,size:"large",onClick:function(e){e.preventDefault(),Object(x.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.update(c);case 2:a=e.sent,f(a);case 4:case"end":return e.stop()}}),e)})))()},children:"Update"}),Object(w.jsx)(E.a,{open:m.success,autoHideDuration:6e3,children:Object(w.jsx)(re,{severity:"success",onClose:function(){f({success:!1,field:"",error:""})},children:"Account Updated!"})})]})]})})},ce=Object(S.a)((function(e){return Object(T.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));var oe=function(){var e=ce(),t=W(),a=Object(o.f)(),n=c.a.useState(null),r=Object(s.a)(n,2),i=r[0],h=r[1],O=Boolean(i),x=function(){h(null)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(l.a,{position:"static",children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{variant:"h6",onClick:function(){return a.push("/")},className:e.title,children:"Flask is bad"}),t.authenticated?Object(w.jsxs)("div",{children:[Object(w.jsx)(j.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},color:"inherit",children:Object(w.jsx)(f.a,{})}),Object(w.jsxs)(p.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:O,onClose:x,children:[Object(w.jsx)(m.a,{onClick:function(){x(),a.push("/account")},children:"My Account"}),Object(w.jsx)(m.a,{onClick:function(){x(),t.signout()},children:"Logout"})]})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{color:"inherit",onClick:function(){return a.push("/login")},children:"Login"}),Object(w.jsx)(b.a,{color:"inherit",onClick:function(){return a.push("/register")},children:"Register"})]})]})}),Object(w.jsxs)(o.c,{children:[Object(w.jsx)(o.a,{exact:!0,path:"/",children:Object(w.jsx)(V,{})}),Object(w.jsx)(o.a,{path:"/login",children:Object(w.jsx)(Y,{})}),Object(w.jsx)(o.a,{path:"/register",children:Object(w.jsx)(ae,{})}),Object(w.jsx)(o.a,{path:"/account",children:Object(w.jsx)(ie,{})})]})]})},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,188)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))},ue=a(81),de=a(176),je=a(177),pe=a(50),me=Object(ue.a)({});v.a.defaults.baseURL="https://flaskisbad.com/api/v1",r.a.render(Object(w.jsx)(de.a,{theme:me,children:Object(w.jsx)(je.a,{children:Object(w.jsx)(N,{children:Object(w.jsx)(pe.a,{children:Object(w.jsx)(oe,{})})})})}),document.getElementById("root")),le()},96:function(e,t,a){},97:function(e,t,a){}},[[123,1,2]]]);
//# sourceMappingURL=main.6b56dc8d.chunk.js.map